<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä AI ‡§∏‡§π‡§æ‡§Ø‡§ï - ‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§î‡§∞ ‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó ‡§Ü‡§ä ‡§õ‡§§‡•Ä‡§∏‡§ó‡§¢‡§º ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡§æ</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary-color: rgb(164, 212, 31);
            --secondary-color: #d32f2f;
            --accent-color: #b87222;
            --bg-gradient: linear-gradient(135deg, #ff6b35 0%, #f7931e 25%, #ffcc02 50%, #4caf50 75%, #2196f3 100%);
            --text-color: #333;
            --card-bg: rgb(255, 255, 255);
            --input-bg: #fafafa;
            --border-color: #ff6b35;
            --particle-color: rgba(255, 107, 53, 0.6);
            --glow-color: rgba(255, 107, 53, 0.4);
        }
        
        [data-theme="dark"] {
            --bg-gradient: linear-gradient(110deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
            --text-color: #ffffff;
            --card-bg: rgba(20, 20, 30, 0.95);
            --input-bg: #1a1a2e;
            --border-color: #ff6b35;
            --particle-color: rgba(255, 107, 53, 0.8);
            --glow-color: rgba(165, 173, 201, 0.6);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans Devanagari', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            overflow-x: hidden;
            color: var(--text-color);
            transition: all 0.3s ease;
            animation: fadeIn 1s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideInFromTop {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes slideInFromLeft {
            from { transform: translateX(-50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideInFromRight {
            from { transform: translateX(50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideInFromBottom {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 107, 53, 0.3); }
            50% { box-shadow: 0 0 30px rgba(255, 107, 53, 0.6); }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes morphing {
            0%, 100% { border-radius: 20px; transform: rotate(0deg); }
            25% { border-radius: 50px; transform: rotate(90deg); }
            50% { border-radius: 20px; transform: rotate(180deg); }
            75% { border-radius: 50px; transform: rotate(270deg); }
        }
        
        @keyframes particleFloat {
            0% { transform: translateY(100vh) translateX(0px) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) translateX(100px) rotate(360deg); opacity: 0; }
        }
        
        @keyframes neonGlow {
            0%, 100% { 
                box-shadow: 0 0 5px var(--glow-color), 0 0 10px var(--glow-color), 0 0 15px var(--glow-color);
            }
            50% { 
                box-shadow: 0 0 10px var(--glow-color), 0 0 20px var(--glow-color), 0 0 30px var(--glow-color);
            }
        }
        
        @keyframes textShimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }
        
        @keyframes slideInScale {
            0% { transform: translateY(50px) scale(0.8); opacity: 0; }
            100% { transform: translateY(0) scale(1); opacity: 1; }
        }
        
        @keyframes rotateIn {
            0% { transform: rotate(-180deg) scale(0); opacity: 0; }
            100% { transform: rotate(0deg) scale(1); opacity: 1; }
        }
        
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }
        
        .floating-element {
            position: absolute;
            opacity: 0.2;
            animation: float 6s ease-in-out infinite;
            filter: drop-shadow(0 0 10px var(--particle-color));
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--particle-color);
            border-radius: 50%;
            animation: particleFloat 8s linear infinite;
        }
        
        .particle:nth-child(odd) {
            animation-duration: 10s;
            background: var(--accent-color);
        }
        
        .particle:nth-child(3n) {
            animation-duration: 12s;
            background: var(--primary-color);
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }
        
        .top-controls {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-bottom: 20px;
            animation: slideInFromTop 0.8s ease-out;
        }
        
        .theme-toggle, .language-toggle {
            padding: 10px 20px;
            border: 2px solid var(--primary-color);
            border-radius: 25px;
            background: var(--card-bg);
            color: var(--text-color);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover, .language-toggle:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px) scale(1.05);
            animation: glow 2s infinite;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(15px);
            animation: slideInFromTop 1s ease-out 0.2s both, neonGlow 3s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, var(--glow-color), transparent);
            animation: morphing 4s linear infinite;
            opacity: 0.1;
        }
        
        .header h1 {
            color: var(--secondary-color);
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color), var(--secondary-color));
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: textShimmer 3s ease-in-out infinite;
            position: relative;
            z-index: 2;
        }
        
        .header p {
            color: var(--text-color);
            opacity: 0.8;
            font-size: 1.2rem;
        }
        
        .chat-container {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            margin-bottom: 20px;
            animation: slideInFromLeft 1s ease-out 0.4s both;
        }
        
        .chat-messages {
            height: 400px;
            overflow-y: auto;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            background: var(--input-bg);
        }
        
        .message {
            margin-bottom: 15px;
            padding: 12px 18px;
            border-radius: 15px;
            max-width: 80%;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes typeWriter {
            from { width: 0; }
            to { width: 100%; }
        }
        
        @keyframes blink {
            0%, 50% { border-color: transparent; }
            51%, 100% { border-color: var(--primary-color); }
        }
        
        .typing-animation {
            overflow: hidden;
            border-right: 2px solid var(--primary-color);
            white-space: nowrap;
            animation: typeWriter 2s steps(40, end), blink 1s infinite;
        }
        
        .ai-message.new-reply {
            animation: slideIn 0.5s ease-out, glow 2s ease-in-out;
            border-left: 4px solid var(--accent-color);
            box-shadow: 0 0 15px rgba(247, 147, 30, 0.3);
        }
        
        .user-message {
            background: var(--primary-color);
            color: white;
            margin-left: auto;
            text-align: right;
        }
        
        .ai-message {
            background: var(--card-bg);
            color: var(--text-color);
            border-left: 4px solid var(--primary-color);
            position: relative;
            padding-right: 60px;
        }
        
        .message-controls {
            position: absolute;
            top: 8px;
            right: 8px;
            display: flex;
            gap: 5px;
        }
        
        .speech-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            opacity: 0.7;
        }
        
        .speech-btn:hover {
            opacity: 1;
            transform: scale(1.15);
            animation: bounce 0.6s ease-in-out;
        }
        
        .speech-btn.playing {
            background: var(--secondary-color);
            animation: heartbeat 1.2s infinite;
            box-shadow: 0 0 15px rgba(211, 47, 47, 0.5);
        }
        

        
        .input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .chat-input {
            flex: 1;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
            background: var(--input-bg);
            color: var(--text-color);
        }
        
        .chat-input:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 10px rgba(255, 107, 53, 0.3);
        }
        
        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4);
        }
        
        .btn-secondary {
            background: #4caf50;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #388e3c;
            transform: translateY(-2px);
        }
        
        .voice-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
            animation: slideInFromBottom 1s ease-out 0.6s both;
        }
        
        .feature-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            animation: slideInFromBottom 1s ease-out calc(0.8s + var(--delay, 0s)) both;
        }
        
        .feature-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            animation: glow 2s infinite;
        }
        
        .feature-card h3 {
            color: var(--secondary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .feature-card p {
            color: var(--text-color);
            opacity: 0.8;
        }
        
        .status {
            text-align: center;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .status.listening {
            background: #c8e6c9;
            color: #2e7d32;
        }
        
        .status.speaking {
            background: #ffecb3;
            color: #5eb615;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .chhattisgarhi-pattern {
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="20" fill="none" stroke="%23ff6b35" stroke-width="2" opacity="0.3"/><path d="M30,30 Q50,10 70,30 Q90,50 70,70 Q50,90 30,70 Q10,50 30,30" fill="none" stroke="%23d32f2f" stroke-width="1" opacity="0.2"/></svg>') no-repeat;
            opacity: 0.1;
        }
        
        .language-indicator {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="language-indicator" id="languageIndicator">‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä</div>
    
    <div class="floating-elements" id="floatingElements">
        <div class="floating-element" style="top: 10%; left: 10%; font-size: 2rem;">üéì</div>
        <div class="floating-element" style="top: 20%; right: 15%; font-size: 1.5rem;">üíª</div>
        <div class="floating-element" style="bottom: 30%; left: 20%; font-size: 2rem;">üîß</div>
        <div class="floating-element" style="bottom: 20%; right: 10%; font-size: 1.8rem;">üìö</div>
    </div>
    
    <div class="chhattisgarhi-pattern"></div>
    
    <div class="container">
        <div class="top-controls">
            <button id="languageToggle" class="language-toggle">üèõÔ∏è ‡§è‡§°‡§µ‡§æ‡§Ç‡§∏ ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä</button>
            <button id="themeToggle" class="theme-toggle">üåô ‡§°‡§æ‡§∞‡•ç‡§ï ‡§Æ‡•ã‡§°</button>
        </div>
        
        <div class="header">
            <h1> ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä AI ‡§∏‡§π‡§æ‡§Ø‡§ï</h1>
            <p id="headerText">‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ, ‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó ‡§Ü‡§ä ‡§õ‡§§‡•Ä‡§∏‡§ó‡§¢‡§º ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡§æ‡§∏‡§¨‡•ç‡§¨‡•ã ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§™‡§ï‡•á ‡§Æ‡§¶‡§¶‡§ó‡§æ‡§∞</p>
        </div>
        
        <div class="chat-container">
            <div id="status" class="status" style="display: none;"></div>
            

            
            <div id="chatMessages" class="chat-messages">
                <div class="message ai-message" id="welcomeMessage">
                    <div>‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä AI ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Ç‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó, ‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ, ‡§ó‡§£‡§ø‡§§ ‡§Ö‡§â ‡§∏‡§¨‡•ç‡§¨‡•ã ‡§∏‡§µ‡§æ‡§≤ ‡§ï‡•á ‡§ú‡§µ‡§æ‡§¨ ‡§¶‡•á ‡§∏‡§ï‡§§ ‡§π‡•Ç‡§Ç‡•§ ‡§ï‡§æ ‡§™‡•Ç‡§õ‡§®‡§æ ‡§ö‡§æ‡§π‡§§ ‡§π‡§µ?</div>
                    <div class="message-controls">
                        <button class="speech-btn" id="welcomeSpeechBtn" title="‡§∏‡•Å‡§®‡§µ">üîä</button>
                    </div>
                </div>
            </div>
            
            <div class="input-container">
                <input type="text" id="userInput" class="chat-input" placeholder="‡§Ö‡§™‡§® ‡§∏‡§µ‡§æ‡§≤ ‡§Ø‡§π‡§æ‡§Ç ‡§≤‡§ø‡§ñ‡§µ...">
                <button id="voiceToTextBtn" class="btn btn-secondary" title="‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•á ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü">üé§</button>
                <button id="sendBtn" class="btn btn-primary"><span id="sendText">‡§≠‡•á‡§ú‡§µ</span></button>
            </div>
        </div>
        
        <div class="features-grid">
            <div class="feature-card">
                <h3>üíª <span id="feature1Title">‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ</span></h3>
                <p id="feature1Text">Python, JavaScript, HTML, CSS ‡§Ö‡§â ‡§Ö‡§®‡•ç‡§Ø ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§ø‡§Ç‡§ó ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶</p>
            </div>
            
            <div class="feature-card">
                <h3>üìö <span id="feature2Title">‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ</span></h3>
                <p id="feature2Text">‡§ï‡§Ç‡§™‡•ç‡§Ø‡•Ç‡§ü‡§∞ ‡§∏‡§æ‡§á‡§Ç‡§∏, ‡§á‡§Ç‡§ú‡•Ä‡§®‡§ø‡§Ø‡§∞‡§ø‡§Ç‡§ó ‡§Ö‡§â ‡§ü‡•á‡§ï‡•ç‡§®‡•ã‡§≤‡•â‡§ú‡•Ä ‡§ï‡•á ‡§∏‡§¨‡•ç‡§¨‡•ã ‡§µ‡§ø‡§∑‡§Ø</p>
            </div>
            
            <div class="feature-card">
                <h3>üßÆ <span id="feature3Title">‡§ó‡§£‡§ø‡§§ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ</span></h3>
                <p id="feature3Text">‡§¨‡•á‡§∏‡§ø‡§ï ‡§∏‡•á ‡§è‡§°‡§µ‡§æ‡§Ç‡§∏ ‡§ó‡§£‡§ø‡§§, ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡§∏ ‡§Ö‡§â ‡§∏‡•ç‡§ü‡•á‡§ü‡§ø‡§∏‡•ç‡§ü‡§ø‡§ï‡•ç‡§∏</p>
            </div>
            
            <div class="feature-card">
                <h3>üé§ <span id="feature4Title">‡§Ü‡§µ‡§æ‡§ú‡§º ‡§ö‡•à‡§ü</span></h3>
                <p id="feature4Text">‡§¨‡•ã‡§≤ ‡§ï‡•á ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•Ç‡§õ‡§µ ‡§Ö‡§â ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§Æ‡•á‡§Ç ‡§ú‡§µ‡§æ‡§¨ ‡§∏‡•Å‡§®‡§µ</p>
            </div>
        </div>
    </div>

    <script>
        const API_KEY = 'AIzaSyAUMKzPb5H_7-INlO2w1eBnDCtwK6MZuk0';
        const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent';
        
        let recognition;
        let isListening = false;
        let lastResponse = '';
        let isDarkMode = true;
        let isAdvancedChhattisgarhi = false;
        
        // Language content
        const languageContent = {
            simple: {
                indicator: '‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä',
                header: '‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ, ‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó ‡§Ö‡§â ‡§∏‡§¨‡•ç‡§¨‡•ã ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§™‡§ï‡•á ‡§Æ‡§¶‡§¶‡§ó‡§æ‡§∞',
                welcome: '‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä AI ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Ç‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó, ‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ, ‡§ó‡§£‡§ø‡§§ ‡§Ö‡§â ‡§∏‡§¨‡•ç‡§¨‡•ã ‡§∏‡§µ‡§æ‡§≤ ‡§ï‡•á ‡§ú‡§µ‡§æ‡§¨ ‡§¶‡•á ‡§∏‡§ï‡§§ ‡§π‡•Ç‡§Ç‡•§ ‡§ï‡§æ ‡§™‡•Ç‡§õ‡§®‡§æ ‡§ö‡§æ‡§π‡§§ ‡§π‡§µ?',
                voice: '‡§¨‡•ã‡§≤ ‡§ï‡•á ‡§™‡•Ç‡§õ‡§µ',
                stop: '‡§∞‡•ã‡§ï‡§µ',
                send: '‡§≠‡•á‡§ú‡§µ',
                placeholder: '‡§Ö‡§™‡§® ‡§∏‡§µ‡§æ‡§≤ ‡§Ø‡§π‡§æ‡§Ç ‡§≤‡§ø‡§ñ‡§µ...',
                features: {
                    coding: '‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
                    codingDesc: 'Python, JavaScript, HTML, CSS ‡§Ö‡§â ‡§Ö‡§®‡•ç‡§Ø ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§ø‡§Ç‡§ó ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶',
                    education: '‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ',
                    educationDesc: '‡§ï‡§Ç‡§™‡•ç‡§Ø‡•Ç‡§ü‡§∞ ‡§∏‡§æ‡§á‡§Ç‡§∏, ‡§á‡§Ç‡§ú‡•Ä‡§®‡§ø‡§Ø‡§∞‡§ø‡§Ç‡§ó ‡§Ö‡§â ‡§ü‡•á‡§ï‡•ç‡§®‡•ã‡§≤‡•â‡§ú‡•Ä ‡§ï‡•á ‡§∏‡§¨‡•ç‡§¨‡•ã ‡§µ‡§ø‡§∑‡§Ø',
                    math: '‡§ó‡§£‡§ø‡§§ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
                    mathDesc: '‡§¨‡•á‡§∏‡§ø‡§ï ‡§∏‡•á ‡§è‡§°‡§µ‡§æ‡§Ç‡§∏ ‡§ó‡§£‡§ø‡§§, ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡§∏ ‡§Ö‡§â ‡§∏‡•ç‡§ü‡•á‡§ü‡§ø‡§∏‡•ç‡§ü‡§ø‡§ï‡•ç‡§∏',
                    voice: '‡§Ü‡§µ‡§æ‡§ú‡§º ‡§ö‡•à‡§ü',
                    voiceDesc: '‡§¨‡•ã‡§≤ ‡§ï‡•á ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•Ç‡§õ‡§µ ‡§Ö‡§â ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§Æ‡•á‡§Ç ‡§ú‡§µ‡§æ‡§¨ ‡§∏‡•Å‡§®‡§µ'
                }
            },
            advanced: {
                indicator: '‡§è‡§°‡§µ‡§æ‡§Ç‡§∏ ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä',
                header: '‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ, ‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó ‡§Ö‡§â ‡§∏‡§Æ‡§∏‡•ç‡§§ ‡§ú‡•ç‡§û‡§æ‡§® ‡§ñ‡§æ‡§§‡§ø‡§∞ ‡§Ü‡§™‡§ï‡•á ‡§∏‡•á‡§µ‡§ï',
                welcome: '‡§™‡•ç‡§∞‡§£‡§æ‡§Æ! ‡§π‡§Æ‡§® ‡§Ü‡§™‡§ï‡•á ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä AI ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§Ü‡§®‡•§ ‡§π‡§Æ‡§® ‡§Ü‡§™‡§ï‡•á ‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó, ‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ, ‡§ó‡§£‡§ø‡§§ ‡§Ö‡§â ‡§∏‡§Æ‡§∏‡•ç‡§§ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ï‡•á ‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡•á ‡§∏‡§ï‡§§ ‡§π‡§®‡•§ ‡§ï‡§æ ‡§ú‡§æ‡§®‡§®‡§æ ‡§ö‡§æ‡§π‡§§ ‡§π‡§µ ‡§ó‡•Å‡§∞‡•Å‡§ú‡•Ä?',
                voice: '‡§µ‡§æ‡§£‡•Ä ‡§≤‡•á ‡§™‡•Ç‡§õ‡§µ',
                stop: '‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡§µ',
                send: '‡§™‡§†‡§æ‡§µ',
                placeholder: '‡§Ü‡§™‡§® ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§á‡§π‡§æ‡§Ç ‡§≤‡§ø‡§ñ‡§µ...',
                features: {
                    coding: '‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
                    codingDesc: 'Python, JavaScript, HTML, CSS ‡§Ö‡§â ‡§Ö‡§®‡•ç‡§Ø ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§ø‡§Ç‡§ó ‡§≠‡§æ‡§∑‡§æ ‡§Æ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
                    education: '‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ',
                    educationDesc: '‡§ï‡§Ç‡§™‡•ç‡§Ø‡•Ç‡§ü‡§∞ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®, ‡§á‡§Ç‡§ú‡•Ä‡§®‡§ø‡§Ø‡§∞‡§ø‡§Ç‡§ó ‡§Ö‡§â ‡§™‡•ç‡§∞‡•å‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï‡•Ä ‡§ï‡•á ‡§∏‡§Æ‡§∏‡•ç‡§§ ‡§µ‡§ø‡§∑‡§Ø',
                    math: '‡§ó‡§£‡§ø‡§§ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
                    mathDesc: '‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§≤‡•á ‡§â‡§®‡•ç‡§®‡§§ ‡§ó‡§£‡§ø‡§§, ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡§∏ ‡§Ö‡§â ‡§∏‡§æ‡§Ç‡§ñ‡•ç‡§Ø‡§ø‡§ï‡•Ä',
                    voice: '‡§µ‡§æ‡§£‡•Ä ‡§∏‡§Ç‡§µ‡§æ‡§¶',
                    voiceDesc: '‡§µ‡§æ‡§£‡•Ä ‡§≤‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡§µ ‡§Ö‡§â ‡§µ‡§æ‡§£‡•Ä ‡§Æ ‡§â‡§§‡•ç‡§§‡§∞ ‡§∏‡•Å‡§®‡§µ'
                }
            }
        };
        
        // Initialize speech recognition
        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'hi-IN';
        }
        
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const startVoiceBtn = document.getElementById('startVoice');
        const stopVoiceBtn = document.getElementById('stopVoice');

        const status = document.getElementById('status');
        const themeToggle = document.getElementById('themeToggle');
        const languageToggle = document.getElementById('languageToggle');
        
        function updateLanguage() {
            const content = isAdvancedChhattisgarhi ? languageContent.advanced : languageContent.simple;
            
            document.getElementById('languageIndicator').textContent = content.indicator;
            document.getElementById('headerText').textContent = content.header;
            document.getElementById('welcomeMessage').firstElementChild.textContent = content.welcome;
            document.getElementById('voiceText').textContent = content.voice;
            document.getElementById('stopText').textContent = content.stop;
            document.getElementById('sendText').textContent = content.send;
            document.getElementById('userInput').placeholder = content.placeholder;
            
            document.getElementById('feature1Title').textContent = content.features.coding;
            document.getElementById('feature1Text').textContent = content.features.codingDesc;
            document.getElementById('feature2Title').textContent = content.features.education;
            document.getElementById('feature2Text').textContent = content.features.educationDesc;
            document.getElementById('feature3Title').textContent = content.features.math;
            document.getElementById('feature3Text').textContent = content.features.mathDesc;
            document.getElementById('feature4Title').textContent = content.features.voice;
            document.getElementById('feature4Text').textContent = content.features.voiceDesc;
            
            languageToggle.textContent = isAdvancedChhattisgarhi ? 'üìù ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä' : 'üèõÔ∏è ‡§è‡§°‡§µ‡§æ‡§Ç‡§∏ ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä';
            
            // Language updated
        }
        
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.body.setAttribute('data-theme', isDarkMode ? 'dark' : 'light');
            themeToggle.textContent = isDarkMode ? '‚òÄÔ∏è ‡§≤‡§æ‡§á‡§ü ‡§Æ‡•ã‡§°' : 'üåô ‡§°‡§æ‡§∞‡•ç‡§ï ‡§Æ‡•ã‡§°';
        }
        
        function toggleLanguage() {
            isAdvancedChhattisgarhi = !isAdvancedChhattisgarhi;
            updateLanguage();
        }
        
        function addMessage(message, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            
            if (isUser) {
                messageDiv.textContent = message;
            } else {
                // Add new reply animation class
                messageDiv.classList.add('new-reply');
                
                // Create message content with typing animation
                const messageContent = document.createElement('div');
                messageContent.className = 'typing-animation';
                messageContent.textContent = message;
                messageDiv.appendChild(messageContent);
                
                // Create controls for AI messages
                const controls = document.createElement('div');
                controls.className = 'message-controls';
                
                const speakBtn = document.createElement('button');
                speakBtn.className = 'speech-btn';
                speakBtn.innerHTML = 'üîä';
                speakBtn.title = isAdvancedChhattisgarhi ? '‡§∏‡•Å‡§®‡§µ' : '‡§∏‡•Å‡§®‡§µ';
                
                controls.appendChild(speakBtn);
                messageDiv.appendChild(controls);
                
                // Add click event for speech
                speakBtn.addEventListener('click', () => {
                    handleMessageSpeech(message, speakBtn);
                });
                
                // Remove typing animation after completion
                setTimeout(() => {
                    messageContent.classList.remove('typing-animation');
                    messageDiv.classList.remove('new-reply');
                }, 3000);
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function showStatus(text, type) {
            status.textContent = text;
            status.className = `status ${type}`;
            status.style.display = 'block';
            
            if (type === 'listening') {
                status.classList.add('pulse');
            } else {
                status.classList.remove('pulse');
            }
        }
        
        function hideStatus() {
            status.style.display = 'none';
            status.classList.remove('pulse');
        }
        
        async function sendMessage(message) {
            if (!message.trim()) return;
            
            addMessage(message, true);
            
            const languageStyle = isAdvancedChhattisgarhi ? 
                '‡§ï‡•á‡§µ‡§≤ ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç, ‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§ ‡§∂‡§¨‡•ç‡§¶‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§æ‡§•, ‡§¨‡§ø‡§®‡§æ ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶ ‡§ï‡•á' : 
                '‡§ï‡•á‡§µ‡§≤ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç, ‡§¨‡§ø‡§®‡§æ ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶ ‡§ï‡•á';
            
            const prompt = `‡§Ü‡§™ ‡§è‡§ï ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä AI ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§ú‡§æ‡§®‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§™‡§ï‡•ã ‡§ï‡•á‡§µ‡§≤ ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§ú‡§µ‡§æ‡§¨ ‡§¶‡•á‡§®‡§æ ‡§π‡•à, ‡§ï‡•ã‡§à ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶ ‡§®‡§π‡•Ä‡§Ç ‡§¶‡•á‡§®‡§æ‡•§ ‡§ú‡§µ‡§æ‡§¨ ‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§≤‡§Ç‡§¨‡§æ‡§à ‡§ï‡§æ ‡§π‡•ã (2-4 ‡§µ‡§æ‡§ï‡•ç‡§Ø), ‡§¨‡§π‡•Å‡§§ ‡§≤‡§Ç‡§¨‡§æ ‡§®‡§π‡•Ä‡§Ç‡•§ ${languageStyle} ‡§≠‡§æ‡§µ‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§î‡§∞ ‡§Æ‡§æ‡§®‡§µ‡•Ä‡§Ø ‡§§‡§∞‡•Ä‡§ï‡•á ‡§∏‡•á ‡§ú‡§µ‡§æ‡§¨ ‡§¶‡•á‡§Ç‡•§ 

‡§Ü‡§™ ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§µ‡§ø‡§∑‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û ‡§π‡•à‡§Ç:
- ‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó ‡§î‡§∞ ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§ø‡§Ç‡§ó (Python, JavaScript, HTML, CSS, etc.)
- ‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§î‡§∞ ‡§ï‡§Ç‡§™‡•ç‡§Ø‡•Ç‡§ü‡§∞ ‡§∏‡§æ‡§á‡§Ç‡§∏
- ‡§ó‡§£‡§ø‡§§ ‡§î‡§∞ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®
- ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º ‡§ï‡§æ ‡§á‡§§‡§ø‡§π‡§æ‡§∏, ‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø, ‡§≠‡§æ‡§∑‡§æ, ‡§§‡•ç‡§Ø‡•ã‡§π‡§æ‡§∞, ‡§ñ‡§æ‡§®-‡§™‡§æ‡§®
- ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º ‡§ï‡•á ‡§ú‡§ø‡§≤‡•á, ‡§∂‡§π‡§∞, ‡§™‡§∞‡•ç‡§Ø‡§ü‡§® ‡§∏‡•ç‡§•‡§≤
- ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º‡•Ä ‡§≤‡•ã‡§ï‡§ó‡•Ä‡§§, ‡§®‡•É‡§§‡•ç‡§Ø, ‡§ï‡§≤‡§æ
- ‡§õ‡§§‡•ç‡§§‡•Ä‡§∏‡§ó‡§¢‡§º ‡§ï‡•Ä ‡§∞‡§æ‡§ú‡§®‡•Ä‡§§‡§ø, ‡§Ö‡§∞‡•ç‡§•‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ
- ‡§ü‡•á‡§ï ‡§ü‡•Ç‡§≤‡•ç‡§∏ ‡§î‡§∞ ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ‡§ó‡§æ‡§á‡§°‡•á‡§Ç‡§∏

‡§∏‡§µ‡§æ‡§≤: ${message}`;
            
            try {
                const response = await fetch(`${API_URL}?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }],
                        generationConfig: {
                            temperature: 0.7,
                            topK: 40,
                            topP: 0.95,
                            maxOutputTokens: 1024
                        }
                    })
                });
                
                const data = await response.json();
                console.log('API Response:', data); // Debug log
                
                if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                    const aiResponse = data.candidates[0].content.parts[0].text;
                    lastResponse = aiResponse;
                    addMessage(aiResponse);
                } else if (data.error) {
                    console.error('API Error:', data.error);
                    const errorMsg = isAdvancedChhattisgarhi ? 
                        `API ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ${data.error.message}` : 
                        `API ‡§è‡§∞‡§∞: ${data.error.message}`;
                    addMessage(errorMsg);
                } else {
                    console.error('Unexpected response:', data);
                    const errorMsg = isAdvancedChhattisgarhi ? 
                        '‡§ï‡•ç‡§∑‡§Æ‡§æ ‡§ï‡§∞‡§µ ‡§ó‡•Å‡§∞‡•Å‡§ú‡•Ä, ‡§ï‡•Å‡§õ ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•ã ‡§ó‡§à‡•§ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡§µ‡•§' : 
                        '‡§Æ‡§æ‡§´ ‡§ï‡§∞‡§µ, ‡§ï‡•Å‡§õ ‡§ó‡§°‡§º‡§¨‡§°‡§º ‡§π‡•ã ‡§ó‡§à‡•§ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡§µ‡•§';
                    addMessage(errorMsg);
                }
            } catch (error) {
                console.error('Error:', error);
                const errorMsg = isAdvancedChhattisgarhi ? 
                    '‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§Æ‡•á‡§Ç ‡§¨‡§æ‡§ß‡§æ ‡§π‡•á‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡§µ‡•§' : 
                    '‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•á‡•§ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡§µ‡•§';
                addMessage(errorMsg);
            }
        }
        

        
        // Event listeners
        themeToggle.addEventListener('click', toggleTheme);
        languageToggle.addEventListener('click', toggleLanguage);
        
        sendBtn.addEventListener('click', () => {
            const message = userInput.value;
            if (message.trim()) {
                sendMessage(message);
                userInput.value = '';
            }
        });
        
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendBtn.click();
            }
        });
        
        // Voice to text functionality
        const voiceToTextBtn = document.getElementById('voiceToTextBtn');
        
        voiceToTextBtn.addEventListener('click', () => {
            if (recognition && !isListening) {
                isListening = true;
                const statusMsg = isAdvancedChhattisgarhi ? '‡§∏‡•Å‡§®‡§§ ‡§π‡§®... ‡§ï‡§π‡§µ' : '‡§∏‡•Å‡§®‡§§ ‡§π‡•Ç‡§Ç... ‡§¨‡•ã‡§≤‡§µ';
                showStatus(statusMsg, 'listening');
                voiceToTextBtn.innerHTML = '‚èπÔ∏è';
                voiceToTextBtn.classList.add('pulse');
                
                recognition.start();
                
                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    userInput.value = transcript;
                    hideStatus();
                    voiceToTextBtn.innerHTML = 'üé§';
                    voiceToTextBtn.classList.remove('pulse');
                    isListening = false;
                };
                
                recognition.onerror = () => {
                    hideStatus();
                    isListening = false;
                    voiceToTextBtn.innerHTML = 'üé§';
                    voiceToTextBtn.classList.remove('pulse');
                };
                
                recognition.onend = () => {
                    hideStatus();
                    isListening = false;
                    voiceToTextBtn.innerHTML = 'üé§';
                    voiceToTextBtn.classList.remove('pulse');
                };
            } else if (recognition && isListening) {
                recognition.stop();
                hideStatus();
                isListening = false;
                voiceToTextBtn.innerHTML = 'üé§';
                voiceToTextBtn.classList.remove('pulse');
            }
        });
        

        
        // Add floating animation to elements
        document.querySelectorAll('.floating-element').forEach((element, index) => {
            element.style.animationDelay = `${index * 0.5}s`;
        });
        
        // Add staggered animations to feature cards
        document.querySelectorAll('.feature-card').forEach((card, index) => {
            card.style.setProperty('--delay', `${index * 0.1}s`);
            
            // Add hover sound effects
            card.addEventListener('mouseenter', () => {
                soundEffects.hover();
            });
        });
        
        // Add hover sound effects to buttons
        document.querySelectorAll('.btn, .theme-toggle, .language-toggle').forEach(button => {
            button.addEventListener('mouseenter', () => {
                soundEffects.hover();
            });
        });
        
        let currentSpeechButton = null;
        let currentUtterance = null;
        let currentAudio = null;
        
        async function handleMessageSpeech(text, button) {
            // Stop any current audio
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            
            if (currentSpeechButton) {
                currentSpeechButton.innerHTML = 'üîä';
                currentSpeechButton.classList.remove('playing');
                currentSpeechButton.title = isAdvancedChhattisgarhi ? '‡§∏‡•Å‡§®‡§µ' : '‡§∏‡•Å‡§®‡§µ';
            }
            
            // If clicking the same button, just stop
            if (currentSpeechButton === button) {
                currentSpeechButton = null;
                return;
            }
            
            // Start new speech with professional TTS
            currentSpeechButton = button;
            button.innerHTML = '‚è∏Ô∏è';
            button.classList.add('playing');
            button.title = isAdvancedChhattisgarhi ? '‡§∞‡•ã‡§ï‡§µ' : '‡§∞‡•ã‡§ï‡§µ';
            
            try {
                // Try multiple professional TTS services
                await tryProfessionalTTS(text, button);
            } catch (error) {
                console.error('Professional TTS failed:', error);
                fallbackToSpeechSynthesis(text, button);
            }
        }
        
        async function tryProfessionalTTS(text, button) {
            const ttsServices = [
                // ResponsiveVoice API (free tier)
                () => tryResponsiveVoice(text, button),
                // Google Cloud TTS (alternative endpoint)
                () => tryGoogleCloudTTS(text, button),
                // Microsoft Azure TTS (alternative)
                () => tryAzureTTS(text, button),
                // Enhanced Google Translate TTS
                () => tryEnhancedGoogleTTS(text, button),
                // IBM Watson TTS
                () => tryIBMWatsonTTS(text, button)
            ];
            
            for (const service of ttsServices) {
                try {
                    await service();
                    return; // Success, exit
                } catch (error) {
                    console.log('TTS service failed, trying next:', error);
                    continue;
                }
            }
            
            throw new Error('All TTS services failed');
        }
        
        function tryResponsiveVoice(text, button) {
            return new Promise((resolve, reject) => {
                // Check if ResponsiveVoice is available
                if (typeof responsiveVoice !== 'undefined') {
                    responsiveVoice.speak(text, "Hindi Female", {
                        rate: 0.8,
                        pitch: 1.2,
                        volume: 1,
                        onstart: () => {
                            console.log('ResponsiveVoice started');
                            resolve();
                        },
                        onend: () => {
                            console.log('ResponsiveVoice ended');
                            resetButton(button);
                        },
                        onerror: (error) => {
                            console.error('ResponsiveVoice error:', error);
                            resetButton(button);
                            reject(error);
                        }
                    });
                } else {
                    reject(new Error('ResponsiveVoice not available'));
                }
            });
        }
        
        function tryGoogleCloudTTS(text, button) {
            return new Promise((resolve, reject) => {
                const gTTSUrl = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodeURIComponent(text)}&tl=hi&client=tw-ob`;
                
                currentAudio = new Audio();
                currentAudio.src = gTTSUrl;
                currentAudio.volume = 1.0;
                
                currentAudio.oncanplaythrough = () => {
                    console.log('gTTS ready');
                    currentAudio.play().then(() => {
                        resolve();
                    }).catch(reject);
                };
                
                currentAudio.onended = () => {
                    console.log('gTTS playback ended');
                    resetButton(button);
                };
                
                currentAudio.onerror = (error) => {
                    console.error('gTTS error:', error);
                    resetButton(button);
                    reject(error);
                };
                
                currentAudio.load();
            });
        }
        
        function tryAzureTTS(text, button) {
            return new Promise((resolve, reject) => {
                // Azure Cognitive Services TTS (demo endpoint)
                const encodedText = encodeURIComponent(text);
                const audioUrl = `https://speech.platform.bing.com/synthesize?language=hi-IN&gender=Female&format=audio-16khz-32kbitrate-mono-mp3&text=${encodedText}`;
                
                currentAudio = new Audio();
                currentAudio.volume = 1.0;
                
                currentAudio.oncanplaythrough = () => {
                    console.log('Azure TTS ready');
                    currentAudio.play().then(() => {
                        resolve();
                    }).catch(reject);
                };
                
                currentAudio.onended = () => {
                    console.log('Azure TTS ended');
                    resetButton(button);
                };
                
                currentAudio.onerror = (error) => {
                    console.error('Azure TTS error:', error);
                    resetButton(button);
                    reject(error);
                };
                
                currentAudio.src = audioUrl;
                currentAudio.load();
            });
        }
        
        function tryEnhancedGoogleTTS(text, button) {
            return new Promise((resolve, reject) => {
                // Enhanced Google TTS with better parameters
                const encodedText = encodeURIComponent(text);
                const audioUrl = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodedText}&tl=hi&client=tw-ob&ttsspeed=0.7&idx=0&textlen=${text.length}`;
                
                currentAudio = new Audio();
                currentAudio.volume = 1.0;
                currentAudio.preload = 'auto';
                
                currentAudio.onloadeddata = () => {
                    console.log('Enhanced Google TTS loaded');
                    currentAudio.play().then(() => {
                        resolve();
                    }).catch(reject);
                };
                
                currentAudio.onended = () => {
                    console.log('Enhanced Google TTS ended');
                    resetButton(button);
                };
                
                currentAudio.onerror = (error) => {
                    console.error('Enhanced Google TTS error:', error);
                    resetButton(button);
                    reject(error);
                };
                
                currentAudio.src = audioUrl;
                currentAudio.load();
            });
        }
        
        function tryIBMWatsonTTS(text, button) {
            return new Promise((resolve, reject) => {
                // IBM Watson TTS (demo endpoint)
                const encodedText = encodeURIComponent(text);
                const audioUrl = `https://api.us-south.text-to-speech.watson.cloud.ibm.com/instances/demo/v1/synthesize?text=${encodedText}&voice=hi-IN_RashiV3Voice&accept=audio/mp3`;
                
                currentAudio = new Audio();
                currentAudio.volume = 1.0;
                
                currentAudio.oncanplaythrough = () => {
                    console.log('IBM Watson TTS ready');
                    currentAudio.play().then(() => {
                        resolve();
                    }).catch(reject);
                };
                
                currentAudio.onended = () => {
                    console.log('IBM Watson TTS ended');
                    resetButton(button);
                };
                
                currentAudio.onerror = (error) => {
                    console.error('IBM Watson TTS error:', error);
                    resetButton(button);
                    reject(error);
                };
                
                currentAudio.src = audioUrl;
                currentAudio.load();
            });
        }
        
        function resetButton(button) {
            if (button) {
                button.innerHTML = 'üîä';
                button.classList.remove('playing');
                button.title = isAdvancedChhattisgarhi ? '‡§∏‡•Å‡§®‡§µ' : '‡§∏‡•Å‡§®‡§µ';
            }
            currentSpeechButton = null;
            currentAudio = null;
        }
        
        function fallbackToSpeechSynthesis(text, button) {
            if ('speechSynthesis' in window) {
                // Cancel any existing speech
                speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'hi-IN';
                utterance.rate = 0.8;
                utterance.pitch = 1.3;
                utterance.volume = 1;
                
                // Get the best available Hindi voice
                const voices = speechSynthesis.getVoices();
                const hindiVoice = voices.find(voice => 
                    voice.lang === 'hi-IN' || 
                    voice.lang === 'hi' ||
                    voice.name.toLowerCase().includes('hindi') ||
                    voice.name.toLowerCase().includes('female')
                );
                
                if (hindiVoice) {
                    utterance.voice = hindiVoice;
                    console.log('Using fallback voice:', hindiVoice.name);
                }
                
                utterance.onstart = () => {
                    console.log('Fallback TTS started');
                };
                
                utterance.onend = () => {
                    console.log('Fallback TTS ended');
                    resetButton(button);
                };
                
                utterance.onerror = (error) => {
                    console.error('Fallback TTS error:', error);
                    resetButton(button);
                };
                
                speechSynthesis.speak(utterance);
            } else {
                console.error('Speech synthesis not supported');
                resetButton(button);
            }
        }
        
        // Initialize welcome message speech
        document.getElementById('welcomeSpeechBtn').addEventListener('click', () => {
            const welcomeText = document.getElementById('welcomeMessage').firstElementChild.textContent;
            handleMessageSpeech(welcomeText, document.getElementById('welcomeSpeechBtn'));
        });
        
        // Initialize Professional TTS System
        console.log('Professional TTS system initialized with multiple fallbacks');
        
        // Load voices for fallback system
        if ('speechSynthesis' in window) {
            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                console.log('Available voices:', voices.length);
                if (voices.length > 0) {
                    console.log('Hindi voices:', voices.filter(v => v.lang.includes('hi')).map(v => v.name));
                }
            }
            
            loadVoices();
            speechSynthesis.onvoiceschanged = loadVoices;
        }
        
        // Create particle system
        function createParticles() {
            const floatingElements = document.getElementById('floatingElements');
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = (8 + Math.random() * 4) + 's';
                floatingElements.appendChild(particle);
            }
        }
        
        // Initialize dark mode and particles
        function initializeApp() {
            // Set dark mode as default
            document.body.setAttribute('data-theme', 'dark');
            themeToggle.textContent = '‚òÄÔ∏è ‡§≤‡§æ‡§á‡§ü ‡§Æ‡•ã‡§°';
            
            // Create particles
            createParticles();
            
            // Update language
            updateLanguage();
            
            // Add enhanced animations to elements
            document.querySelectorAll('.feature-card').forEach((card, index) => {
                card.style.animation = `slideInScale 0.8s ease-out ${0.2 + index * 0.1}s both`;
            });
            
            // Enhanced floating animations
            document.querySelectorAll('.floating-element').forEach((element, index) => {
                element.style.animationDelay = `${index * 0.5}s`;
                element.style.animation += `, rotateIn 1s ease-out ${index * 0.2}s both`;
            });
        }
        
        // Initialize
        initializeApp();
    </script>
</body>
</html>
